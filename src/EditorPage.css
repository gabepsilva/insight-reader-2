@import "./fonts.css";

:root {
  --editor-font: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";
}

html,
body {
  margin: 0;
  padding: 0;
  font-family: var(--editor-font);
}

#root {
  min-height: 100vh;
}

.editor-page {
  height: 100vh;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.editor-toolbar {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 10px;
  border-bottom: 1px solid #ddd;
  background: #f5f5f5;
  flex-shrink: 0;
}

.editor-toolbar button {
  padding: 4px 10px;
  font-size: 14px;
  font-family: var(--editor-font);
  background: #fff;
  border: 1px solid #ccc;
  border-radius: 4px;
  color: #000;
  cursor: pointer;
}

.editor-toolbar button:hover:not(:disabled) {
  background: #eee;
  border-color: #999;
}

.editor-toolbar button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.editor-toolbar-theme {
  padding: 4px 8px;
}

.editor-area {
  flex: 1;
  min-height: 120px;
  position: relative;
}

.editor-mirror,
.editor-textarea {
  position: absolute;
  inset: 0;
  padding: 12px;
  font-family: ui-monospace, "Cascadia Code", "Source Code Pro", Menlo, Consolas, monospace;
  font-size: var(--editor-font-size, 14px);
  line-height: 1.5;
  box-sizing: border-box;
  border: none;
  outline: none;
}

.editor-mirror {
  overflow: auto;
  pointer-events: none;
  color: transparent;
  caret-color: transparent;
  user-select: none;
  scrollbar-width: none;
  -ms-overflow-style: none;
}

/* Overlay: on top of textarea so marks can receive hover. Click on non-mark focuses textarea. */
.editor-mirror--overlay {
  z-index: 1;
  pointer-events: auto;
}

.editor-textarea--under-mirror {
  z-index: 0;
}

.editor-mirror::-webkit-scrollbar {
  display: none;
}

.editor-mirror-content {
  white-space: pre-wrap;
  word-wrap: break-word;
  /* No min-height: 100% — mirror height must match textarea's content exactly so
   * scrollTop stays in sync. With min-height the mirror was taller when text had
   * trailing newlines, causing misalignment. */
}

/* Lint overlay marks: distinct hues per category for high contrast. */
.lint {
  padding: 0;
  display: inline;
  border-radius: 2px;
}
.lint--spelling { background: rgba(198, 40, 40, 0.5); }
.lint--grammar { background: rgba(0, 131, 143, 0.5); }
.lint--punctuation { background: rgba(0, 172, 193, 0.5); }
.lint--capitalization { background: rgba(245, 124, 0, 0.55); }
.lint--style { background: rgba(25, 118, 210, 0.5); }
.lint--misc { background: rgba(123, 31, 162, 0.5); }

.editor-legend {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 6px 14px;
  padding: 6px 12px;
  font-family: var(--editor-font);
  font-size: 12px;
  color: #666;
  border-top: 1px solid #ddd;
  background: #f9f9f9;
  flex-shrink: 0;
}
.editor-legend-count {
  margin-right: 4px;
  font-weight: 600;
}
.editor-legend-item {
  display: inline-flex;
  align-items: center;
  gap: 4px;
}
.editor-legend-swatch {
  width: 10px;
  height: 10px;
  border-radius: 2px;
  flex-shrink: 0;
}
.editor-legend-swatch--spelling { background: #c62828; }
.editor-legend-swatch--grammar { background: #00838f; }
.editor-legend-swatch--punctuation { background: #00acc1; }
.editor-legend-swatch--capitalization { background: #ef6c00; }
.editor-legend-swatch--style { background: #1976d2; }
.editor-legend-swatch--misc { background: #7b1fa2; }

.editor-textarea {
  overflow: auto;
  background: transparent;
  resize: none;
  color: #000;
  white-space: pre-wrap; /* match mirror so highlight alignment is correct */
}

/* Grammarly-style popup on hover over a lint mark. Fix suggestions come from Harper. */
.editor-lint-popup {
  z-index: 2;
  min-width: 240px;
  max-width: 360px;
  padding: 14px 16px;
  font-family: var(--editor-font);
  font-size: 14px;
  line-height: 1.5;
  color: #1a1a1a;
  background: #fff;
  border: 1px solid #d0d0d0;
  border-radius: 10px;
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.12), 0 2px 6px rgba(0, 0, 0, 0.08);
}
.editor-lint-popup__message {
  margin: 0 0 12px;
  font-size: 14px;
  font-weight: 500;
  color: #333;
  line-height: 1.5;
}
.editor-lint-popup__suggestions {
  margin: 0;
  padding: 0;
  list-style: none;
  display: flex;
  flex-direction: column;
  gap: 6px;
}
.editor-lint-popup__item {
  margin: 0;
}
.editor-lint-popup__apply {
  display: block;
  width: 100%;
  padding: 10px 14px;
  font-size: 14px;
  font-weight: 500;
  font-family: inherit;
  text-align: left;
  background: #f0f7ff;
  border: 1px solid #b3d4fe;
  border-radius: 6px;
  color: #0066cc;
  cursor: pointer;
  transition: background 0.15s, border-color 0.15s;
}
.editor-lint-popup__apply:hover {
  background: #e0efff;
  border-color: #80b8ff;
}
.editor-lint-popup__ignore {
  display: block;
  width: 100%;
  margin-top: 10px;
  padding: 8px 14px;
  font-size: 13px;
  font-weight: 500;
  font-family: inherit;
  text-align: center;
  background: transparent;
  border: 1px solid #d0d0d0;
  border-radius: 6px;
  color: #666;
  cursor: pointer;
  transition: background 0.15s, border-color 0.15s, color 0.15s;
}
.editor-lint-popup__ignore:hover {
  background: #f5f5f5;
  border-color: #bbb;
  color: #444;
}

/* ----- Dark mode ----- */
.editor-page--dark {
  background: #1e1e1e;
}

body:has(.editor-page--dark),
.editor-page--dark .editor-area {
  background: #1e1e1e;
}

.editor-page--dark .editor-toolbar {
  background: #2d2d2d;
  border-bottom-color: #2d2d2d;
}

.editor-page--dark .editor-legend {
  background: #2d2d2d;
  border-top-color: #444;
  color: #aaa;
}

.editor-page--dark .editor-toolbar button {
  background: #3d3d3d;
  border-color: #555;
  color: #e0e0e0;
}

.editor-page--dark .editor-toolbar button:hover:not(:disabled) {
  background: #4d4d4d;
  border-color: #666;
}

.editor-page--dark .editor-textarea {
  background: transparent; /* must stay transparent so mirror's <mark> highlights show through */
  color: #e0e0e0;
  caret-color: #e0e0e0;
}

.editor-page--dark .editor-textarea::placeholder {
  color: #888;
}

/* Dark mode: palette tuned for #1e1e1e — softer, distinct, easy on the eyes. */
.editor-page--dark .lint--spelling { background: rgba(240, 113, 120, 0.5); }
.editor-page--dark .lint--grammar { background: rgba(128, 203, 196, 0.5); }
.editor-page--dark .lint--punctuation { background: rgba(77, 208, 225, 0.5); }
.editor-page--dark .lint--capitalization { background: rgba(255, 213, 79, 0.5); }
.editor-page--dark .lint--style { background: rgba(130, 170, 255, 0.45); }
.editor-page--dark .lint--misc { background: rgba(206, 147, 216, 0.5); }

.editor-page--dark .editor-legend-swatch--spelling { background: #f07178; }
.editor-page--dark .editor-legend-swatch--grammar { background: #80cbc4; }
.editor-page--dark .editor-legend-swatch--punctuation { background: #4dd0e1; }
.editor-page--dark .editor-legend-swatch--capitalization { background: #ffd54f; }
.editor-page--dark .editor-legend-swatch--style { background: #82aaff; }
.editor-page--dark .editor-legend-swatch--misc { background: #ce93d8; }

.editor-page--dark .editor-lint-popup {
  color: #e0e0e0;
  background: #2d2d2d;
  border-color: #444;
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4), 0 2px 6px rgba(0, 0, 0, 0.3);
}
.editor-page--dark .editor-lint-popup__message {
  color: #d0d0d0;
}
.editor-page--dark .editor-lint-popup__apply {
  background: #1e3a5f;
  border-color: #2a4a6f;
  color: #82aaff;
}
.editor-page--dark .editor-lint-popup__apply:hover {
  background: #2a4a6f;
  border-color: #3a5a7f;
}
.editor-page--dark .editor-lint-popup__ignore {
  background: transparent;
  border-color: #555;
  color: #888;
}
.editor-page--dark .editor-lint-popup__ignore:hover {
  background: #3d3d3d;
  border-color: #666;
  color: #bbb;
}
